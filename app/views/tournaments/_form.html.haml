= simple_form_for @tournament, :html => { :class => 'form-horizontal' } do |f|
  = f.input :name, :disabled => (@tournament.active? ? true : nil), :label => I18n.t("custom_translations.name", :default => "name").capitalize
  = f.input :start_date, :required => true, :label => I18n.t("custom_translations.start date", :default => "start date").capitalize do
    - @date = @tournament.start_date.nil?? DateTime.now : @tournament.start_date
    = text_field_tag :start_date_date, @date.strftime("%Y-%m-%d"), :class => 'datepicker input-small', :disabled => (@tournament.active? ? true : nil)
    = text_field_tag :start_date_time, @date.strftime("%H:%M"), :class => 'timepicker input-small', :disabled => (@tournament.active? ? true : nil)
  = f.input :description, :disabled => (@tournament.active? ? true : nil), :label => I18n.t("custom_translations.description", :default => "description").capitalize
  = f.input :open
  - if @tournament.tournament_form.present?
    .control-group.tournament-form
      %label.control-label
        Form
      .form-checkboxes
        = f.simple_fields_for :tournament_form_attributes, @tournament.tournament_form do |tf|
          = tf.input :rank, :wrapper_class => "pull-left"
          = tf.input :name, :wrapper_class => "pull-left"
          = tf.input :licence, :wrapper_class => "pull-left"
          = tf.input :phone, :wrapper_class => "pull-left"
          = tf.input :comment, :wrapper_class => "pull-left"
        .clearfix
  .form-actions
    - if request.xhr?
      = link_to '#players-modal', :class => 'btn btn-modal', :data => { :toggle => 'modal' }, :role => 'button' do
        %i.icon-fullscreen
        - if @tournament.active?
          = I18n.t("custom_translations.show players", :default => "show players").capitalize
        - else
          = I18n.t("custom_translations.manage players", :default => "manage players").capitalize
    - if request[:action] == 'edit'
      = link_to I18n.t("custom_translations.go to bracket", :default => 'go to bracket').capitalize, tournament_bracket_path(@tournament), :class => 'btn'
    .margin-top
      = f.button :submit, request[:action] == 'edit' ? I18n.t("custom_translations.update", :default => 'update').capitalize : I18n.t("custom_translations.create", :default => 'create').capitalize, :class => 'btn'
      - if request[:action] == 'new'
        = link_to I18n.t("custom_translations.cancel", :default => "cancel").capitalize, tournaments_user_path, :class => 'btn'
      - if request[:action] == 'edit'
        - if @tournament.active?
          = link_to I18n.t("custom_translations.deactivate", :default => 'deactivate').capitalize, activate_tournament_path(@tournament), :class => "btn btn-warning", :method => 'put', :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure? All tournament progress will be lost!')) }
        - else
          = link_to I18n.t("custom_translations.activate", :default => 'activate').capitalize, activate_tournament_path(@tournament), :class => "btn btn-success", :method => 'put', :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }
        = link_to I18n.t("custom_translations.delete", :default => 'delete').capitalize, tournament_path(@tournament), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-danger'    
    
%script
  $('.datepicker').datepicker({format: 'yyyy-mm-dd', autoclose: true});
  $('.timepicker').timepicker({showMeridian: false, defaultTime: 'value', showInputs: true });
