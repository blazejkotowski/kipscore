!!!
%html
  %head
    %title= full_page_title(yield(:title))
    = favicon_link_tag 'favicon.ico'
    = stylesheet_link_tag    "application", :media => "all"
    = javascript_include_tag "application"
    = yield :javascript_includes
    = csrf_meta_tags

  - body_class = ''
  - body_class += "bracket " if params[:action] == "bracket"
  - body_class += "static " if ['static_pages', 'sessions'].include? params[:controller]
  - body_class += "with-bar" if @footer_bar.present?
  %body{ :class => body_class }
    #bg-container.container
    :javascript
      fixBackground();
    #main-wrapper
      %div#navigation.navbar.navbar-inverse.navbar-fixed-top
        %div.navbar-inner
          %div.container
            %div.pull-left
              = link_to root_path, :class => 'brand' do
                %span.logo-small{ :class => ('beta' if Settings.beta_version) }
              %ul.nav
                %li= link_to I18n.t("custom_translations.tournaments", :default => "tournaments"), tournaments_path
                %li= link_to I18n.t("custom_translations.about us", :default => "about us"), about_path
                %li= link_to I18n.t("custom_translations.contact", :default => "contact"), contact_path
            - if signed_in?
              %ul.nav.pull-right
                %li.dropdown
                  %a{ :href => '#', :class => 'dropdown-toggle', 'data-toggle' => 'dropdown'}
                    = current_user.name
                    %b.caret  
                  %ul.dropdown-menu
                    %li= link_to I18n.t("custom_translations.profile", :default => 'profile'), current_user
                    %li= link_to I18n.t("custom_translations.tournaments", :default => 'tournaments'), tournaments_user_path
                    %li.divider
                    %li= link_to I18n.t("custom_translations.sign out", :default => "sign out"), signout_path
            - else 
              = form_tag signin_path, :method => 'post', :id => 'login-box' do
                = text_field 'email', nil, :placeholder => 'Email', :class => 'input-medium'
                = password_field_tag 'password', nil, :placeholder => I18n.t("custom_translations.password", :default => 'password').capitalize, :class => 'input-medium'
                = button_tag I18n.t("custom_translations.sign in", :default => 'sign in').capitalize, :type => 'submit', :class => 'btn'
      
      %div#main-container.container
        %div.container.notifications
          - flash.each do |type,msg|
            %div{ :class => "alert alert-#{type}" }
              %button.close{ :type => 'button', 'data-dismiss' => 'alert' }Ã—
              = msg
            
        %div.container
          = yield
              
        - if Rails.env.development?
          .container= debug(params.merge(session))
      
      #push-footer 
         
    %footer
      - if @footer_bar.present?
        = render "static_pages/bar"
      .navbar.navbar-inverse
        .navbar-inner
          .container
            %ul.nav
              %li= link_to I18n.t("custom_translations.tournaments", :default => "tournaments"), tournaments_path
              %li= link_to I18n.t("custom_translations.about us", :default => "about us"), about_path
              %li= link_to I18n.t("custom_translations.contact", :default => "contact"), contact_path
              %li= link_to I18n.t("custom_translations.instruction", :default => "instruction"), instruction_path
              %li= link_to I18n.t("custom_translations.innovation", :default => "innovation"), innovation_path
          .container
            Tournament and league management software
            = "2012-#{Date.today.year}"
            All rights reserved &copy;
            = link_to "kipscore", root_path
